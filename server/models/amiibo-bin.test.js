import AmiiboBin from './amiibo-bin';

describe('AmiiboBin', () => {
  describe('.writePassword', () => {
    let password, bin, binWithPassword;
    beforeEach(() => {
      password = 'xxxxxxxx';
      bin = `04bcefdf62304d809f480fe0f110ffeea500000014fe9ebcd6acc2d62128248e6a9ce1786aa25db27e0ba10c182b657aaa2f287aef1c863babef07c848571d2c219eae01bac7f6127e1386dcbd06add2819a249f01000000034b09020d12a608a40c9ffcf26e0c410c6f68471034954c39f4d0a001ca6e0a00c4be2ade90af4af7c67edaad1636fe6fdf25b46734df9d5cf347c8ba463aac4261122386876080958324801b15d3a57b8017fd2e305475ea8bd55e412e75e82b252bcdef83d456cf21b9d994a221bcf5b1cd6110699b14e97c6b9789a6f3d11a37040eac532c0b5637e40d4cc4c34e370464830d2d5f624478eafbca86ece41d927c46916ad092cc80ea9c53f21a61553e6884360c439a2c00cc374279878ec510c65b3f40fc3bcbf424bac091c2a3716d87e3bd7e6f15a1f94d570b330e90b185900cd5a47505075bc9ec9255746f27c08222aa04b6e1a239c97cc4ef74838bd145ed8e3914432f2786b73854a57e1f0ae386d036d6a27ea12674e7c9a64962e4b3064f6e628971b261ef2a4b30159d41a9fbf20723100a27b162cee4b3d83c8d57542bfe87e805d70361032d3f8203ad22ec28eb964365107967b6c5e65594bfd1df8d81292419dcb886518e5c4968833785cfaf94b3a5bd81860c29e4f24c9a8c0390f818f5235b7e7a66f8cd291eaa6e8378a10157a38fa419482920049ed8c294a4ff37556c710d581e85fb9e01000fbd000000045f0000000000000000000000`;
      binWithPassword = `04bcefdf62304d809f480fe0f110ffeea500000014fe9ebcd6acc2d62128248e6a9ce1786aa25db27e0ba10c182b657aaa2f287aef1c863babef07c848571d2c219eae01bac7f6127e1386dcbd06add2819a249f01000000034b09020d12a608a40c9ffcf26e0c410c6f68471034954c39f4d0a001ca6e0a00c4be2ade90af4af7c67edaad1636fe6fdf25b46734df9d5cf347c8ba463aac4261122386876080958324801b15d3a57b8017fd2e305475ea8bd55e412e75e82b252bcdef83d456cf21b9d994a221bcf5b1cd6110699b14e97c6b9789a6f3d11a37040eac532c0b5637e40d4cc4c34e370464830d2d5f624478eafbca86ece41d927c46916ad092cc80ea9c53f21a61553e6884360c439a2c00cc374279878ec510c65b3f40fc3bcbf424bac091c2a3716d87e3bd7e6f15a1f94d570b330e90b185900cd5a47505075bc9ec9255746f27c08222aa04b6e1a239c97cc4ef74838bd145ed8e3914432f2786b73854a57e1f0ae386d036d6a27ea12674e7c9a64962e4b3064f6e628971b261ef2a4b30159d41a9fbf20723100a27b162cee4b3d83c8d57542bfe87e805d70361032d3f8203ad22ec28eb964365107967b6c5e65594bfd1df8d81292419dcb886518e5c4968833785cfaf94b3a5bd81860c29e4f24c9a8c0390f818f5235b7e7a66f8cd291eaa6e8378a10157a38fa419482920049ed8c294a4ff37556c710d581e85fb9e01000fbd000000045f000000xxxxxxxx00000000`;
    });

    it('writes the password into the bin', () => {
      const newBin = AmiiboBin.writePassword(bin, password);
      expect(newBin).toEqual(binWithPassword);
    });
  });

  describe('.writeLocks', () => {
    let bin, binWithLocks;
    beforeEach(() => {
      bin = `04bcefdf62304d809f480fe0f110ffeea500000014fe9ebcd6acc2d62128248e6a9ce1786aa25db27e0ba10c182b657aaa2f287aef1c863babef07c848571d2c219eae01bac7f6127e1386dcbd06add2819a249f01000000034b09020d12a608a40c9ffcf26e0c410c6f68471034954c39f4d0a001ca6e0a00c4be2ade90af4af7c67edaad1636fe6fdf25b46734df9d5cf347c8ba463aac4261122386876080958324801b15d3a57b8017fd2e305475ea8bd55e412e75e82b252bcdef83d456cf21b9d994a221bcf5b1cd6110699b14e97c6b9789a6f3d11a37040eac532c0b5637e40d4cc4c34e370464830d2d5f624478eafbca86ece41d927c46916ad092cc80ea9c53f21a61553e6884360c439a2c00cc374279878ec510c65b3f40fc3bcbf424bac091c2a3716d87e3bd7e6f15a1f94d570b330e90b185900cd5a47505075bc9ec9255746f27c08222aa04b6e1a239c97cc4ef74838bd145ed8e3914432f2786b73854a57e1f0ae386d036d6a27ea12674e7c9a64962e4b3064f6e628971b261ef2a4b30159d41a9fbf20723100a27b162cee4b3d83c8d57542bfe87e805d70361032d3f8203ad22ec28eb964365107967b6c5e65594bfd1df8d81292419dcb886518e5c4968833785cfaf94b3a5bd81860c29e4f24c9a8c0390f818f5235b7e7a66f8cd291eaa6e8378a10157a38fa419482920049ed8c294a4ff37556c710d581e85fb9e01000fbd000000045f0000000000000000000000`;
      binWithLocks = `04bc000062304d809f480fe0f110ffeea500000014fe9ebcd6acc2d62128248e6a9ce1786aa25db27e0ba10c182b657aaa2f287aef1c863babef07c848571d2c219eae01bac7f6127e1386dcbd06add2819a249f01000000034b09020d12a608a40c9ffcf26e0c410c6f68471034954c39f4d0a001ca6e0a00c4be2ade90af4af7c67edaad1636fe6fdf25b46734df9d5cf347c8ba463aac4261122386876080958324801b15d3a57b8017fd2e305475ea8bd55e412e75e82b252bcdef83d456cf21b9d994a221bcf5b1cd6110699b14e97c6b9789a6f3d11a37040eac532c0b5637e40d4cc4c34e370464830d2d5f624478eafbca86ece41d927c46916ad092cc80ea9c53f21a61553e6884360c439a2c00cc374279878ec510c65b3f40fc3bcbf424bac091c2a3716d87e3bd7e6f15a1f94d570b330e90b185900cd5a47505075bc9ec9255746f27c08222aa04b6e1a239c97cc4ef74838bd145ed8e3914432f2786b73854a57e1f0ae386d036d6a27ea12674e7c9a64962e4b3064f6e628971b261ef2a4b30159d41a9fbf20723100a27b162cee4b3d83c8d57542bfe87e805d70361032d3f8203ad22ec28eb964365107967b6c5e65594bfd1df8d81292419dcb886518e5c4968833785cfaf94b3a5bd81860c29e4f24c9a8c0390f818f5235b7e7a66f8cd291eaa6e8378a10157a38fa419482920049ed8c294a4ff37556c710d581e85fb9e000000bd000000045f0000000000000080800000`;
    });

    it('writes the locks into the bin', () => {
      const newBin = AmiiboBin.writeLocks(bin);
      expect(newBin).toEqual(binWithLocks);
    });
  });

  describe('.writeUid', () => {
    let uid, bin, binWithUid;
    beforeEach(() => {
      uid = '1122334455667788ff'
      bin = `04bcefdf62304d809f480fe0f110ffeea500000014fe9ebcd6acc2d62128248e6a9ce1786aa25db27e0ba10c182b657aaa2f287aef1c863babef07c848571d2c219eae01bac7f6127e1386dcbd06add2819a249f01000000034b09020d12a608a40c9ffcf26e0c410c6f68471034954c39f4d0a001ca6e0a00c4be2ade90af4af7c67edaad1636fe6fdf25b46734df9d5cf347c8ba463aac4261122386876080958324801b15d3a57b8017fd2e305475ea8bd55e412e75e82b252bcdef83d456cf21b9d994a221bcf5b1cd6110699b14e97c6b9789a6f3d11a37040eac532c0b5637e40d4cc4c34e370464830d2d5f624478eafbca86ece41d927c46916ad092cc80ea9c53f21a61553e6884360c439a2c00cc374279878ec510c65b3f40fc3bcbf424bac091c2a3716d87e3bd7e6f15a1f94d570b330e90b185900cd5a47505075bc9ec9255746f27c08222aa04b6e1a239c97cc4ef74838bd145ed8e3914432f2786b73854a57e1f0ae386d036d6a27ea12674e7c9a64962e4b3064f6e628971b261ef2a4b30159d41a9fbf20723100a27b162cee4b3d83c8d57542bfe87e805d70361032d3f8203ad22ec28eb964365107967b6c5e65594bfd1df8d81292419dcb886518e5c4968833785cfaf94b3a5bd81860c29e4f24c9a8c0390f818f5235b7e7a66f8cd291eaa6e8378a10157a38fa419482920049ed8c294a4ff37556c710d581e85fb9e01000fbd000000045f0000000000000000000000`;
      binWithUid = `ffbcefdf62304d809f480fe0f110ffeea500000014fe9ebcd6acc2d62128248e6a9ce1786aa25db27e0ba10c182b657aaa2f287aef1c863babef07c848571d2c219eae01bac7f6127e1386dcbd06add2819a249f01000000034b09020d12a608a40c9ffcf26e0c410c6f68471034954c39f4d0a001ca6e0a00c4be2ade90af4af7c67edaad1636fe6fdf25b46734df9d5cf347c8ba463aac4261122386876080958324801b15d3a57b8017fd2e305475ea8bd55e412e75e82b252bcdef83d456cf21b9d994a221bcf5b1cd6110699b14e97c6b9789a6f3d11a37040eac532c0b5637e40d4cc4c34e370464830d2d5f624478eafbca86ece41d927c46916ad092cc80ea9c53f21a61553e6884360c439a2c00cc374279878ec510c65b3f40fc3bcbf424bac091c2a3716d87e3bd7e6f15a1f94d570b330e90b185900cd5a47505075bc9ec9255746f27c08222aa04b6e1a239c97cc4ef74838bd145ed8e3914432f2786b73854a57e1f0ae386d036d6a27ea12674e7c9a64962e4b3064f6e628971b261ef2a4b30159d41a9fbf20723100a27b162cee4b3d83c8d57542bfe87e805d70361032d3f8203ad22ec28eb964365107967b6c5e65594bfd1df8d81292419dcb886518e5c4968833785cfaf94b3a5bd8186112233445566778890f818f5235b7e7a66f8cd291eaa6e8378a10157a38fa419482920049ed8c294a4ff37556c710d581e85fb9e01000fbd000000045f0000000000000000000000`;
    });

    it('writes the UID into the bin', () => {
      const newBin = AmiiboBin.writeUid(bin, uid);
      expect(newBin).toEqual(binWithUid);
    });
  });
});
